local CoreGui = game:GetService("CoreGui")
local player = game:GetService("Players").LocalPlayer
local character = player.Character
local humanoid = character:WaitForChild("Humanoid")
function CreateShopESP(shopPart)
    local ESPholder = Instance.new("Folder")
    ESPholder.Name = shopPart.Name..'_ESP'
    ESPholder.Parent = CoreGui

    local BillboardGui = Instance.new("BillboardGui")
    local TextLabel = Instance.new("TextLabel")
    BillboardGui.Adornee = shopPart
    BillboardGui.Name = shopPart.Name
    BillboardGui.Parent = ESPholder
    BillboardGui.Size = UDim2.new(0, 100, 0, 150)
    BillboardGui.StudsOffset = Vector3.new(0, 1, 0)
    BillboardGui.AlwaysOnTop = true
    TextLabel.Parent = BillboardGui
    TextLabel.BackgroundTransparency = 1
    TextLabel.Position = UDim2.new(0, 0, 0, -50)
    TextLabel.Size = UDim2.new(0, 100, 0, 100)
    TextLabel.Font = Enum.Font.SourceSansSemibold
    TextLabel.TextSize = 17
    TextLabel.TextColor3 = Color3.new(12, 4, 20)
    TextLabel.TextStrokeTransparency = 0.3
    TextLabel.TextYAlignment = Enum.TextYAlignment.Bottom
    TextLabel.Text = '[ '..shopPart.Name .. " | Shop" .. " ]"
    TextLabel.ZIndex = 10
end

function CreateBattleESP(battlePart)
    local ESPholder = Instance.new("Folder")
    ESPholder.Name = battlePart.Name..'_ESP'
    ESPholder.Parent = CoreGui

    local BillboardGui = Instance.new("BillboardGui")
    local TextLabel = Instance.new("TextLabel")
    BillboardGui.Adornee = battlePart
    BillboardGui.Name = battlePart.Name
    BillboardGui.Parent = ESPholder
    BillboardGui.Size = UDim2.new(0, 100, 0, 150)
    BillboardGui.StudsOffset = Vector3.new(0, 1, 0)
    BillboardGui.AlwaysOnTop = true
    TextLabel.Parent = BillboardGui
    TextLabel.BackgroundTransparency = 1
    TextLabel.Position = UDim2.new(0, 0, 0, -50)
    TextLabel.Size = UDim2.new(0, 100, 0, 100)
    TextLabel.Font = Enum.Font.SourceSansSemibold
    TextLabel.TextSize = 17
    TextLabel.TextColor3 = Color3.new(12, 4, 20)
    TextLabel.TextStrokeTransparency = 0.3
    TextLabel.TextYAlignment = Enum.TextYAlignment.Bottom

    -- Assuming the battle type is stored in the "Battle" value inside the script
    local script = battlePart:FindFirstChild("Script")
    if script and script:FindFirstChild("Battle") then
        TextLabel.Text = "[ " .. tostring(script.Battle.Value) .. " | Battle" .. " ]"
    else
        TextLabel.Text = "[ " .. tostring(script.Battle.Value) .. " | Battle" .. " ]"
    end

    TextLabel.ZIndex = 10
end

local workspace = game:GetService("Workspace")

function RemoveBattleESP(battlePart)
    local espholder = CoreGui:FindFirstChild(battlePart.Name..'_ESP')
    if espholder then
        espholder:Destroy()
    end
end

function RemoveShopESP(shopPart)
    local espholder = CoreGui:FindFirstChild(shopPart.Name..'_ESP')
    if espholder then
        espholder:Destroy()
    end
end

local shopFolder = workspace:WaitForChild("Shops")

local function UnESP()
    for _, shopPart in pairs(shopFolder:GetChildren()) do
        RemoveShopESP(shopPart)
    end
end

local function UnESP2()
    local allESP = CoreGui:GetChildren()
    for _, espFolder in pairs(allESP) do
        if espFolder.Name:match("_ESP$") then
            espFolder:Destroy()
        end
    end
end
local ESPenabled = false
local ESPenabled2 = false
local Mercury = loadstring(game:HttpGet("https://raw.githubusercontent.com/deeeity/mercury-lib/master/src.lua"))()
local GUI = Mercury:Create{
    Name = "Mercury",
    Size = UDim2.fromOffset(600, 400),
    Theme = Mercury.Themes.Dark,
    Link = "https://github.com/deeeity/mercury-lib"
}

local Tab = GUI:Tab{
    Name = "Main",
    Icon = "rbxassetid://8569322835"
}

local Tab2 = GUI:Tab{
    Name = "Utility",
    Icon = "rbxassetid://8569322835"
}

Tab:Button{
	Name = "Kill boss",
	Description = "Attempts to kill the boss [ nameless ]",
	Callback = function()
local npcs = {}
 
	 local function disappear(hum)
	   if hum:IsA("Humanoid") and not game.Players:GetPlayerFromCharacter(hum.Parent) then
		 table.insert(npcs,{hum,hum.HipHeight})
   local rootPart = hum.Parent:FindFirstChild("HumanoidRootPart")
		 if rootPart then
			 hum.Health = 0
		 end      
		 end
	 end
	 for _,hum in pairs(workspace:GetDescendants()) do
	   disappear(hum)
	 end
	end
}

Tab:Button{
	Name = "Antiidle",
	Description = "Anti idle for those stupid bullet hell bosses",
	Callback = function()
for i,v in pairs(getconnections(game.Players.LocalPlayer.Idled)) do
v:Disable()
end
	end
}

Tab:Button{
	Name = "Disable proj dmg",
	Description = "Disables damage from projectiles",
	Callback = function()
local gmt = getrawmetatable(game)
setreadonly(gmt, false)
local oldCall = gmt.__namecall

gmt.__namecall = function(Self,...)
args = {}
local method = getnamecallmethod()

if tostring(method) == "FireServer" and tostring(Self.Name) == "Damage" then
for i, connection in pairs (getconnections(method)) do
connection:Disable()
end
end
return oldCall(Self,...)
end
	end
}

Tab2:Button{
	Name = "remote spy",
	Description = "!! may crash !!",
	Callback = function()
local owner = "Upbolt"
local branch = "revision"

local function webImport(file)
    return loadstring(game:HttpGetAsync(("https://raw.githubusercontent.com/%s/Hydroxide/%s/%s.lua"):format(owner, branch, file)), file .. '.lua')()
end

webImport("init")
webImport("ui/main")
	end
}

Tab:Button{
    Name = "shop ESP",
    Description = "shows you where the shops are [nameless]",
    Callback = function()
        ESPenabled = not ESPenabled
        for _, shopPart in pairs(shopFolder:GetChildren()) do
            if ESPenabled then
                CreateShopESP(shopPart)
            else
                RemoveShopESP(shopPart)
            end
        end
    end
}

Tab:Button{
    Name = "shop UNESP",
    Description = "just removes the esp [nameless]",
    Callback = UnESP
}

Tab:Button{
    Name = "get all weapons",
    Description = "!! RISKY !! to equip you have to press the thing in the top left",
    Callback = function()
	for i,v in pairs (game:GetService("Players").LocalPlayer.Weapons:GetChildren()) do
if v.ClassName == "BoolValue" then
v.Value = true
end
end
	end
}

Tab:Button{
    Name = "Battle ESP",
    Description = "shows you where the battles are",
    Callback = function()
        ESPenabled2 = not ESPenabled2
        for _, battlePart in pairs(workspace:GetChildren()) do
            if battlePart.Name == "Battle" then
                if ESPenabled2 then
                    CreateBattleESP(battlePart)
                else
                    RemoveBattleESP(battlePart)
                end
            end
        end
    end
}

Tab:Button{
    Name = "Battle UNESP",
    Description = "just removes the esp",
    Callback = UnESP2
}

Tab2:Button{
    Name = ";setcreatorid",
    Description = "sets your id to the creator's id",
    Callback = function()
if game.CreatorType == Enum.CreatorType.User then
		speaker.UserId = game.CreatorId
		GUI:Notification{
	Title = "Alert",
	Text = 'Set UserId to '..game.CreatorId,
	Duration = 3,
	Callback = function() end
}
	elseif game.CreatorType == Enum.CreatorType.Group then
		local OwnerID = GroupService:GetGroupInfoAsync(game.CreatorId).Owner.Id
		speaker.UserId = OwnerID
		GUI:Notification{
	Title = "Alert",
	Text = 'Set UserId to '..OwnerID,
	Duration = 3,
	Callback = function() end
}
	end
    end
}

Tab2:Button{
    Name = "fullbright",
    Description = "fullbright.",
    Callback = function()
	Lighting.Brightness = 2
	Lighting.ClockTime = 14
	Lighting.FogEnd = 100000
	Lighting.GlobalShadows = false
	Lighting.OutdoorAmbient = Color3.fromRGB(128, 128, 128)
    end
}
